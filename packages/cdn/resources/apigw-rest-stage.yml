Type: AWS::ApiGateway::Stage
Properties:
  RestApiId: !Ref apigwRest
  DeploymentId: !Ref apigwRestDeployment
  StageName: '${file(../settings.js):stage}'
  AccessLogSetting:
    DestinationArn: !GetAtt apigwRestLogGroup.Arn
    Format: '${file(./apigateway-log-format.js):restApiLogFormat}'
  TracingEnabled: true
  MethodSettings:
    - MetricsEnabled: true
      HttpMethod: '*'
      ResourcePath: '/*'
      ThrottlingRateLimit: 2000
      ThrottlingBurstLimit: 1000
  Tags:
    - Key: 'Name'
      Value: !Sub '${AWS::StackName} rest api default stage'
    - Key: 'ManagedBy'
      Value: '${file(../settings.js):stackName}'
