Type: AWS::ApiGatewayV2::Stage
Properties:
  ApiId:
    Ref: apigwHttp
  StageName: '$default'
  AutoDeploy: true
  DefaultRouteSettings:
    DataTraceEnabled: false
    DetailedMetricsEnabled: true
    ThrottlingBurstLimit: 1000
    ThrottlingRateLimit: 2000
  AccessLogSettings:
    DestinationArn: !GetAtt apigwHttpLogGroup.Arn
    Format: '${file(./apigateway-log-format.js):httpApiLogFormat}'
  Tags:
    Name: !Sub '${AWS::StackName} http api default stage'
    ManagedBy: '${file(../settings.js):stackName}'
