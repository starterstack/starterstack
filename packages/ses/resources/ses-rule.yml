DependsOn:
  - s3MailPolicy
  - lambdaPermission
Type: 'AWS::SES::ReceiptRule'
Properties:
  Rule:
    Name: !Sub '${AWS::StackName}-ses-rule'
    Recipients:
      - 'hello@${file(../settings.js):stageRoot}'
    Actions:
      - S3Action:
          BucketName: !Ref s3Mail
      - LambdaAction:
          FunctionArn: !GetAtt SesDashreceiveLambdaFunction.Arn
          InvocationType: Event
    Enabled: true
    ScanEnabled: true
    TlsPolicy: Require
  RuleSetName: !GetAtt verifySes.RuleSet
